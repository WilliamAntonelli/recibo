<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Recibo Edit√°vel - Sabor da Ro√ßa</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 20px auto;
        width: 50%; /* meia p√°gina */
        background-color: #fff;
    }
    .recibo {
        border: 1px solid #333;
        padding: 20px;
        line-height: 1.5;
    }
    h1 {
        text-align: center;
        font-size: 1.5em;
        margin-bottom: 5px;
    }
    p {
        margin: 5px 0;
        font-size: 1em;
    }
    input {
        border: none;
        border-bottom: 1px solid #000;
        font-size: 1em;
        padding: 2px 3px;
        font-family: Arial, sans-serif;
        width: auto;
    }
    .linha-editavel {
        display: block;
        width: 100%;
    }
    .linha-editavel input {
        width: 90%;
    }
    .data {
        display: inline-block;
        width: auto;
    }
</style>
</head>
<body>

<div class="recibo">
<h1>Sabor da Ro√ßa</h1>
<p>CNPJ: 58.81.685/0001-82</p>

<p>&nbsp;</p>
<p>&nbsp;</p>

<p>Eu, Flavia Aparecida de Souza, recebi a quantia de R$ 
<input type="number" id="valor" placeholder="0,00"></p>

<p id="valorExtenso" style="margin-left:10px;"></p>

<p>Da <input type="text" id="pagador" placeholder="Nome do pagador" style="width:100%;"></p>

<p>Referente √† <input type="text" id="motivo" placeholder="Motivo" style="width:100%;"></p>

<p>&nbsp;</p>
<p>&nbsp;</p>

<p>Por ser verdade, firmamos o presente recibo para os devidos fins.</p>

<p>&nbsp;</p>
<p>&nbsp;</p>

<p>Urubici, <input type="text" id="data" style="width:120px;"></p>
</div>

<div style="text-align:center; margin-top:10px;">
<button id="btnPDF">üìÑ Gerar PDF</button>
</div>

<script>
// Fun√ß√£o para converter n√∫mero para extenso em portugu√™s
function numeroParaExtenso(valor) {
    const unidades = ["zero","um","dois","tr√™s","quatro","cinco","seis","sete","oito","nove"];
    const dezenas = ["","dez","vinte","trinta","quarenta","cinquenta","sessenta","setenta","oitenta","noventa"];
    const especiais = ["dez","onze","doze","treze","quatorze","quinze","dezesseis","dezessete","dezoito","dezenove"];

    valor = parseInt(valor);
    if(isNaN(valor)) return "";

    if(valor < 10) return unidades[valor];
    if(valor < 20) return especiais[valor-10];
    if(valor < 100) {
        let u = valor % 10;
        let d = Math.floor(valor / 10);
        return dezenas[d] + (u>0 ? " e " + unidades[u] : "");
    }
    if(valor < 1000){
        let c = Math.floor(valor/100);
        let resto = valor % 100;
        let str = "";
        if(c==1 && resto==0) str = "cem";
        else str = (c>0 ? unidades[c]+"centos" : "");
        if(resto>0) str += " e " + numeroParaExtenso(resto);
        return str;
    }
    return valor; // acima de 999, retorna n√∫mero
}

// Atualiza o valor por extenso automaticamente
document.getElementById("valor").addEventListener("input", function(){
    const valor = this.value;
    document.getElementById("valorExtenso").innerText = numeroParaExtenso(valor) + " reais";
});

// Define data atual como padr√£o
const hoje = new Date();
const dia = String(hoje.getDate()).padStart(2,'0');
const mes = String(hoje.getMonth()+1).padStart(2,'0');
const ano = hoje.getFullYear();
document.getElementById("data").value = `${dia}/${mes}/${ano}`;

// PDF
document.getElementById("btnPDF").addEventListener("click", function(){
    const reciboDiv = document.querySelector(".recibo");
    const clone = reciboDiv.cloneNode(true);

    clone.querySelectorAll("input").forEach(function(el){
        const span = document.createElement("span");
        span.textContent = el.value || el.placeholder;
        el.parentNode.replaceChild(span, el);
    });

    html2pdf(clone, {
        margin: 0.5,
        filename: 'recibo.pdf',
        image: { type:'jpeg', quality:0.98 },
        html2canvas:{scale:2},
        jsPDF:{unit:'in', format:'a4', orientation:'portrait'}
    });
});
</script>

</body>
</html>
